---
title: "Player network"
output: html_document
date: "2025-05-12"
editor_options: 
  chunk_output_type: console
---

Build a network graph of Double Disc Court (DDC) players and their teammates to visualize connections in the competitive community

Since you're working with data from https://doubledisccourt.com/results, the basic idea is to: Scrape the event pages to extract teams and players, count participation frequency to identify the top 25 players, build a graph where each edge represents a team connection, visualize the network in R using {igraph} and optionally {ggraph}

Install and load required libraries
```{r}
install.packages(c("rvest", "dplyr", "stringr", "igraph", "ggraph", "tidygraph"))

library(rvest)
library(dplyr)
library(stringr)
library(igraph)
library(ggraph)
library(tidygraph)
```

Scrape team data from each event. We'll assume a list of event URLs (or you can scrape them from the main page)

```{r}
library(chromote)
library(rvest)

# Load tournament page
url <- "https://doubledisccourt.com/results/tournament.html?id=551"
b <- ChromoteSession$new()
b$Page$navigate(url)
Sys.sleep(5)  # wait for JS to populate the page

# Extract rendered HTML
html_doc <- b$DOM$getDocument()
source <- b$DOM$getOuterHTML(nodeId = html_doc$root$nodeId)[["outerHTML"]]
page <- read_html(source)

# Extract <li> elements in the tournament result list
teams <- page %>% html_nodes("ul.form li")

# Skip the header row and parse player names
team_data <- lapply(teams[-1], function(team) {
  cells <- team %>% html_nodes("div.dataCell")
  if (length(cells) >= 2) {
    names <- cells[2] %>%
      html_nodes("a") %>%
      html_text(trim = TRUE)
    
    if (length(names) == 2) {
      data.frame(Player1 = names[1], Player2 = names[2], stringsAsFactors = FALSE)
    } else {
      NULL
    }
  } else {
    NULL
  }
})

# Combine into a data frame
df <- bind_rows(team_data)
print(df)
```


